import{j as r}from"./jsx-runtime-D_zvdyIk.js";import{g as T,r as l}from"./iframe-CamNAop3.js";import{r as F}from"./index-Cro3bzAN.js";import"./preload-helper-D9Z9MdNV.js";var K=F();const B=T(K),v=({options:f=[],multiple:x=!0,outlined:j=!1,optionLabel:a="",filtering:w=!0,usePortal:S=!1,placeholder:M="Select..."})=>{const[L,m]=l.useState(!1),[b,q]=l.useState(""),[c,d]=l.useState([]),[g,y]=l.useState(null),i=l.useRef(null),h=l.useRef(null),D=()=>{m(e=>{const t=!e;if(t&&i.current){const o=i.current.getBoundingClientRect();y({top:o.bottom+window.scrollY,left:o.left+window.scrollX,width:o.width})}else y(null);return t})},n=e=>typeof e=="string"?e:e&&typeof e=="object"?a&&e[a]!==void 0&&e[a]!==null?e[a]:e.name||e.label||JSON.stringify(e):"",N=e=>{x?c.includes(e)?d(t=>t.filter(o=>o!==e)):d(t=>[...t,e]):c.includes(e)?d([]):(d([e]),m(!1))},V=e=>{d(t=>t.filter(o=>o!==e))},I=e=>n(e).toLowerCase().includes(b.toLowerCase()),C=e=>{h.current&&!h.current.contains(e.target)&&i.current&&!i.current.contains(e.target)&&m(!1)};l.useEffect(()=>(document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)),[]);const _=(e,t)=>{if(!t)return e;const o=new RegExp(`(${t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")})`,"gi");return e.split(o).map((s,R)=>o.test(s)?r.jsx("mark",{style:{backgroundColor:"#95dfdd",color:"#333",borderRadius:2},children:s},R):r.jsx("span",{children:s},R))},k=w?f.filter(I):f,P=(e,t)=>typeof e=="string"?e:e&&e.id!==void 0?e.id:e&&e.name?e.name:`option-${t}`,E=()=>r.jsxs("div",{className:"dropdown-body",style:S&&g?{position:"absolute",top:`${g.top}px`,left:`${g.left}px`,width:`${g.width}px`,zIndex:9999}:{},ref:h,role:"listbox","aria-multiselectable":x,tabIndex:-1,children:[w&&r.jsxs("div",{className:"search-container",children:[r.jsx("span",{className:"search-icon","aria-hidden":"true",children:"🔍"}),r.jsx("input",{type:"text","aria-label":"Search options",value:b,onChange:e=>q(e.target.value),className:"search-input",autoFocus:!0,placeholder:"Search..."})]}),k.length===0?r.jsx("div",{className:"no-options","aria-live":"polite",children:"No options found"}):k.map((e,t)=>{const o=n(e),O=c.includes(e);return r.jsx("div",{className:`option-item ${O?"selected":""}`,onClick:()=>N(e),role:"option","aria-selected":O,tabIndex:0,onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&(s.preventDefault(),N(e))},children:_(o,w?b:"")},P(e,t))})]});return r.jsxs("div",{className:`multi-select-dropdown-wrapper ${j?"outlined":""}`,children:[a&&r.jsx("label",{className:"dropdown-label",htmlFor:"multi-select-dropdown-header",children:a}),r.jsxs("div",{className:`multi-select-dropdown ${j?"outlined":""}`,ref:h,children:[r.jsxs("div",{id:"multi-select-dropdown-header",className:"dropdown-header",onClick:D,ref:i,role:"combobox","aria-expanded":L,"aria-haspopup":"listbox",tabIndex:0,onKeyDown:e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),D()),e.key==="Escape"&&m(!1)},children:[c.length===0?r.jsx("span",{className:"placeholder-text",style:{color:"#aaa"},children:M}):c.map(e=>r.jsxs("span",{className:"selected-tag",title:n(e),children:[n(e),x&&r.jsx("button",{"aria-label":`Remove ${n(e)}`,onClick:t=>{t.stopPropagation(),V(e)},children:"×"})]},n(e))),r.jsx("span",{className:"dropdown-arrow","aria-hidden":"true",children:L?"▲":"▼"})]}),L&&(S?B.createPortal(E(),document.body):E())]})]})};v.__docgenInfo={description:"",methods:[],displayName:"MultiSelectDropdown",props:{options:{defaultValue:{value:"[]",computed:!1},required:!1},multiple:{defaultValue:{value:"true",computed:!1},required:!1},outlined:{defaultValue:{value:"false",computed:!1},required:!1},optionLabel:{defaultValue:{value:"''",computed:!1},required:!1},filtering:{defaultValue:{value:"true",computed:!1},required:!1},usePortal:{defaultValue:{value:"false",computed:!1},required:!1},placeholder:{defaultValue:{value:"'Select...'",computed:!1},required:!1}}};const Y={title:"Components/MultiSelectDropdown",component:v,argTypes:{multiple:{control:"boolean"},outlined:{control:"boolean"},filtering:{control:"boolean"},usePortal:{control:"boolean"},placeholder:{control:"text"},optionLabel:{control:"text"}}},$=f=>r.jsx(v,{...f}),u=$.bind({});u.args={options:["Option 1","Option with icon","Long Long Option 3","Long Long Long Option 4","Long Long Long Long Option 5","Long Long Long Long Long Option 6"],multiple:!0,outlined:!1,filtering:!0,usePortal:!1,placeholder:"Select options..."};const p=$.bind({});p.args={options:[{id:1,name:"Option 1"},{id:2,name:"Option with icon"},{id:3,name:"Long Long Option 3"},{id:3,name:"Long Long Long Option 4"},{id:3,name:"Long Long Long Long Option 5"},{id:3,name:"Long Long Long Long Long Option 6"}],multiple:!0,outlined:!0,filtering:!0,optionLabel:"Label",placeholder:"Select..."};u.parameters={...u.parameters,docs:{...u.parameters?.docs,source:{originalSource:"args => <MultiSelectDropdown {...args} />",...u.parameters?.docs?.source}}};p.parameters={...p.parameters,docs:{...p.parameters?.docs,source:{originalSource:"args => <MultiSelectDropdown {...args} />",...p.parameters?.docs?.source}}};const A=["Default","WithObjects"];export{u as Default,p as WithObjects,A as __namedExportsOrder,Y as default};
